+ source ../common/common_lib.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+ source ../common/common_lib.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+ source ../common/common_lib.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+ source ../common/common_lib.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ main
+ rpm -qa
+ grep expect
+ rpm -qa
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
++ type -t post_test
+ grep expect
+ main
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
++ type -t post_test
+ rpm -qa
+ '[' -n function ']'
+ grep expect
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
++ type -t config_params
++ type -t config_params
+ '[' -n '' ']'
+ '[' -n '' ']'
++ type -t config_params
++ type -t pre_test
++ type -t pre_test
+ '[' -n '' ']'
+ '[' -n function ']'
+ pre_test
+ '[' -n function ']'
+ LOG_INFO 'Start environmental preparation.'
+ pre_test
+ message='Start environmental preparation.'
+ LOG_INFO 'Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Wed Sep 27 14:10:05 2023 - INFO  - Start environmental preparation.
Wed Sep 27 14:10:05 2023 - INFO  - Start environmental preparation.
Wed Sep 27 14:10:05 2023 - INFO  - Start environmental preparation.
Wed Sep 27 14:10:05 2023 - INFO  - Start environmental preparation.
+ DNF_INSTALL dnsmasq
+ pkgs=dnsmasq
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dnsmasq --node 1 --tempfile ''
+ DNF_INSTALL dnsmasq
+ pkgs=dnsmasq
+ node=1
+ '[' -z '' ']'
+ tmpfile=
+ DNF_INSTALL dnsmasq
+ pkgs=dnsmasq
+ node=1
+ '[' -z '' ']'
+ tmpfile=
+ DNF_INSTALL dnsmasq
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dnsmasq --node 1 --tempfile ''
+ pkgs=dnsmasq
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dnsmasq --node 1 --tempfile ''
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs dnsmasq --node 1 --tempfile ''
+ tmpfile2=/tmp/tmpyfo0fhf_
+ '[' -z '' ']'
+ tmpfile=/tmp/tmpyfo0fhf_
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Wed Sep 27 14:10:08 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Wed Sep 27 14:10:08 2023 - INFO  - Start testing...
+ test_execution dnsmasq.service
+ service=dnsmasq.service
++ date '+%Y-%m-%d %T'
+ log_time='2023-09-27 14:10:08'
+ test_restart dnsmasq.service
+ service=dnsmasq.service
+ systemctl restart dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ tmpfile2=/tmp/tmp5z_ymd2m
+ '[' -z '' ']'
+ tmpfile=/tmp/tmp5z_ymd2m
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Wed Sep 27 14:10:08 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Wed Sep 27 14:10:08 2023 - INFO  - Start testing...
+ test_execution dnsmasq.service
+ service=dnsmasq.service
++ date '+%Y-%m-%d %T'
+ log_time='2023-09-27 14:10:08'
+ test_restart dnsmasq.service
+ service=dnsmasq.service
+ systemctl restart dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
Wed Sep 27 14:10:08 2023 - INFO  - pkgs:(dnsmasq) is already installed
+ tmpfile2=
+ '[' -z '' ']'
+ tmpfile=
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Wed Sep 27 14:10:08 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Wed Sep 27 14:10:08 2023 - INFO  - Start testing...
+ test_execution dnsmasq.service
+ service=dnsmasq.service
++ date '+%Y-%m-%d %T'
+ log_time='2023-09-27 14:10:08'
+ test_restart dnsmasq.service
+ service=dnsmasq.service
+ systemctl restart dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ tmpfile2='Last metadata expiration check: 0:15:41 ago on Wed 27 Sep 2023 01:54:26 PM UTC.
Dependencies resolved.
================================================================================
 Package           Architecture     Version                  Repository    Size
================================================================================
Installing:
 dnsmasq           x86_64           2.89-1.oe2309            OS           251 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 251 k
Installed size: 583 k
Downloading Packages:
Waiting for process with pid 1393 to finish.
dnsmasq-2.89-1.oe2309.x86_64.rpm                494 kB/s | 251 kB     00:00    
--------------------------------------------------------------------------------
Total                                           193 kB/s | 251 kB     00:01     
Running transaction check
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dnsmasq-2.89-1.oe2309.x86_64 is already installed'
+ '[' -z '' ']'
+ tmpfile='Last metadata expiration check: 0:15:41 ago on Wed 27 Sep 2023 01:54:26 PM UTC.
Dependencies resolved.
================================================================================
 Package           Architecture     Version                  Repository    Size
================================================================================
Installing:
 dnsmasq           x86_64           2.89-1.oe2309            OS           251 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 251 k
Installed size: 583 k
Downloading Packages:
Waiting for process with pid 1393 to finish.
dnsmasq-2.89-1.oe2309.x86_64.rpm                494 kB/s | 251 kB     00:00    
--------------------------------------------------------------------------------
Total                                           193 kB/s | 251 kB     00:01     
Running transaction check
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dnsmasq-2.89-1.oe2309.x86_64 is already installed'
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Wed Sep 27 14:10:09 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Wed Sep 27 14:10:09 2023 - INFO  - Start testing...
+ test_execution dnsmasq.service
+ service=dnsmasq.service
++ date '+%Y-%m-%d %T'
+ log_time='2023-09-27 14:10:09'
+ test_restart dnsmasq.service
+ service=dnsmasq.service
+ systemctl restart dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: active'
     Active: active (running) since Wed 2023-09-27 14:10:09 UTC; 3s ago
+ CHECK_RESULT 0 0 0 'dnsmasq.service restart failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl stop dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ grep 'Active: active'
+ systemctl status dnsmasq.service
+ CHECK_RESULT 1 0 0 'dnsmasq.service restart failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service restart failed'
+ LOG_ERROR 'dnsmasq.service restart failed'
+ message='dnsmasq.service restart failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service restart failed'
Wed Sep 27 14:10:13 2023 - ERROR - dnsmasq.service restart failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 37'
+ message='../common/common_lib.sh line 37'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 37'
Wed Sep 27 14:10:13 2023 - ERROR - ../common/common_lib.sh line 37
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl stop dnsmasq.service
+ systemctl status dnsmasq.service
+ grep 'Active: active'
+ CHECK_RESULT 1 0 0 'dnsmasq.service restart failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service restart failed'
+ LOG_ERROR 'dnsmasq.service restart failed'
+ message='dnsmasq.service restart failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service restart failed'
+ CHECK_RESULT 0 0 0 'dnsmasq.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
Wed Sep 27 14:10:13 2023 - ERROR - dnsmasq.service restart failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 37'
+ message='../common/common_lib.sh line 37'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 37'
Wed Sep 27 14:10:13 2023 - ERROR - ../common/common_lib.sh line 37
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl stop dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: active'
+ CHECK_RESULT 1 0 0 'dnsmasq.service restart failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service restart failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service restart failed'
+ LOG_ERROR 'dnsmasq.service restart failed'
+ message='dnsmasq.service restart failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service restart failed'
Wed Sep 27 14:10:14 2023 - ERROR - dnsmasq.service restart failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 37'
+ message='../common/common_lib.sh line 37'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 37'
Wed Sep 27 14:10:14 2023 - ERROR - ../common/common_lib.sh line 37
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl stop dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: inactive'
     Active: inactive (dead)
+ CHECK_RESULT 0 0 0 'dnsmasq.service stop failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl start dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: inactive'
+ CHECK_RESULT 1 0 0 'dnsmasq.service stop failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service stop failed'
+ LOG_ERROR 'dnsmasq.service stop failed'
+ message='dnsmasq.service stop failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service stop failed'
Wed Sep 27 14:10:18 2023 - ERROR - dnsmasq.service stop failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 42'
+ message='../common/common_lib.sh line 42'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 42'
Wed Sep 27 14:10:18 2023 - ERROR - ../common/common_lib.sh line 42
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl start dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: inactive'
+ CHECK_RESULT 1 0 0 'dnsmasq.service stop failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service stop failed'
+ LOG_ERROR 'dnsmasq.service stop failed'
+ message='dnsmasq.service stop failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service stop failed'
Wed Sep 27 14:10:18 2023 - ERROR - dnsmasq.service stop failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 42'
+ message='../common/common_lib.sh line 42'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 42'
Wed Sep 27 14:10:18 2023 - ERROR - ../common/common_lib.sh line 42
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl start dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: inactive'
+ CHECK_RESULT 1 0 0 'dnsmasq.service stop failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service stop failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service stop failed'
+ LOG_ERROR 'dnsmasq.service stop failed'
+ message='dnsmasq.service stop failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service stop failed'
Wed Sep 27 14:10:19 2023 - ERROR - dnsmasq.service stop failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 42'
+ message='../common/common_lib.sh line 42'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 42'
Wed Sep 27 14:10:19 2023 - ERROR - ../common/common_lib.sh line 42
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl start dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SLEEP_WAIT 5
+ wait_time=5
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 5 --cmd '' --mode 1
+ systemctl status dnsmasq.service
+ grep 'Active: active'
     Active: active (running) since Wed 2023-09-27 14:10:18 UTC; 5s ago
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ test_enabled dnsmasq.service
+ service=dnsmasq.service
++ systemctl is-enabled dnsmasq.service
+ state=disabled
+ '[' disabled == enabled ']'
+ '[' disabled == disabled ']'
++ systemctl enable dnsmasq.service
++ grep 'Created symlink'
++ awk '{print $3}'
+ symlink_file=/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service enable failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service enable failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl disable dnsmasq.service
Removed "/etc/systemd/system/multi-user.target.wants/dnsmasq.service".
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
find: ‘/etc/systemd/system/multi-user.target.wants/dnsmasq.service’: No such file or directory
+ CHECK_RESULT 1 0 1 'dnsmasq.service disable failed'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='dnsmasq.service disable failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ journalctl --since '2023-09-27 14:10:08' -u dnsmasq.service
+ grep -i 'fail\|error'
+ grep -v -i 'DEBUG\|INFO\|WARNING'
+ CHECK_RESULT 1 0 1 'There is an error message for the log of dnsmasq.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of dnsmasq.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ test_reload dnsmasq.service
+ service=dnsmasq.service
+ systemctl start dnsmasq.service
+ systemctl reload dnsmasq.service
+ grep 'Job type reload is not applicable'
Failed to reload dnsmasq.service: Job type reload is not applicable for unit dnsmasq.service.
+ CHECK_RESULT 0 0 0 'Job type reload is not applicable for unit dnsmasq.service'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Job type reload is not applicable for unit dnsmasq.service'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl status dnsmasq.service
+ grep 'Active: active'
     Active: active (running) since Wed 2023-09-27 14:10:18 UTC; 5s ago
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Wed Sep 27 14:10:23 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Wed Sep 27 14:10:23 2023 - INFO  - succeed to execute the case.
+ systemctl status dnsmasq.service
+ grep 'Active: active'
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
     Active: active (running) since Wed 2023-09-27 14:10:18 UTC; 5s ago
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ test_enabled dnsmasq.service
+ service=dnsmasq.service
++ systemctl is-enabled dnsmasq.service
+ state=disabled
+ '[' disabled == enabled ']'
+ '[' disabled == disabled ']'
++ systemctl enable dnsmasq.service
++ grep 'Created symlink'
++ awk '{print $3}'
Wed Sep 27 14:10:23 2023 - INFO  - start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmpyfo0fhf_ ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmpyfo0fhf_
+ systemctl status dnsmasq.service
+ grep 'Active: active'
+ symlink_file=/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service enable failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service enable failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl disable dnsmasq.service
     Active: active (running) since Wed 2023-09-27 14:10:18 UTC; 5s ago
+ CHECK_RESULT 0 0 0 'dnsmasq.service start failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ test_enabled dnsmasq.service
+ service=dnsmasq.service
++ systemctl is-enabled dnsmasq.service
Removed "/etc/systemd/system/multi-user.target.wants/dnsmasq.service".
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
find: ‘/etc/systemd/system/multi-user.target.wants/dnsmasq.service’: No such file or directory
+ CHECK_RESULT 1 0 1 'dnsmasq.service disable failed'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='dnsmasq.service disable failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ journalctl --since '2023-09-27 14:10:08' -u dnsmasq.service
+ grep -v -i 'DEBUG\|INFO\|WARNING'
+ state=disabled
+ '[' disabled == enabled ']'
+ '[' disabled == disabled ']'
+ grep -i 'fail\|error'
++ awk '{print $3}'
++ systemctl enable dnsmasq.service
++ grep 'Created symlink'
+ CHECK_RESULT 1 0 1 'There is an error message for the log of dnsmasq.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of dnsmasq.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ test_reload dnsmasq.service
+ service=dnsmasq.service
+ systemctl start dnsmasq.service
+ symlink_file=/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
/etc/systemd/system/multi-user.target.wants/dnsmasq.service
+ CHECK_RESULT 0 0 0 'dnsmasq.service enable failed'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service enable failed'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl disable dnsmasq.service
+ systemctl reload dnsmasq.service
+ grep 'Job type reload is not applicable'
Removed "/etc/systemd/system/multi-user.target.wants/dnsmasq.service".
Failed to reload dnsmasq.service: Job type reload is not applicable for unit dnsmasq.service.
+ CHECK_RESULT 0 0 0 'Job type reload is not applicable for unit dnsmasq.service'
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log='Job type reload is not applicable for unit dnsmasq.service'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ systemctl status dnsmasq.service
+ grep 'Active: active'
+ find /etc/systemd/system/multi-user.target.wants/dnsmasq.service
find: ‘/etc/systemd/system/multi-user.target.wants/dnsmasq.service’: No such file or directory
+ CHECK_RESULT 1 0 1 'dnsmasq.service disable failed'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='dnsmasq.service disable failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ journalctl --since '2023-09-27 14:10:08' -u dnsmasq.service
+ grep -v -i 'DEBUG\|INFO\|WARNING'
+ grep -i 'fail\|error'
+ CHECK_RESULT 1 0 1 'There is an error message for the log of dnsmasq.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of dnsmasq.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ test_reload dnsmasq.service
+ service=dnsmasq.service
+ systemctl start dnsmasq.service
     Active: active (running) since Wed 2023-09-27 14:10:18 UTC; 5s ago
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Wed Sep 27 14:10:24 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z 2
+ test 2 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed Sep 27 14:10:24 2023 - ERROR - failed to execute the case.
+ exit 2
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Wed Sep 27 14:10:24 2023 - INFO  - start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z /tmp/tmp5z_ymd2m ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile /tmp/tmp5z_ymd2m
Job for dnsmasq.service failed.
See "systemctl status dnsmasq.service" and "journalctl -xeu dnsmasq.service" for details.
+ grep 'Job type reload is not applicable'
+ systemctl reload dnsmasq.service
+ CHECK_RESULT 1 0 0 'Job type reload is not applicable for unit dnsmasq.service'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='Job type reload is not applicable for unit dnsmasq.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'Job type reload is not applicable for unit dnsmasq.service'
+ LOG_ERROR 'Job type reload is not applicable for unit dnsmasq.service'
+ message='Job type reload is not applicable for unit dnsmasq.service'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Job type reload is not applicable for unit dnsmasq.service'
Wed Sep 27 14:10:24 2023 - ERROR - Job type reload is not applicable for unit dnsmasq.service
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 91'
+ message='../common/common_lib.sh line 91'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 91'
Wed Sep 27 14:10:24 2023 - ERROR - ../common/common_lib.sh line 91
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl status dnsmasq.service
+ grep 'Active: active'
Unit dnsmasq.service could not be found.
+ systemctl status dnsmasq.service
+ grep 'inactive (dead)'
Unit dnsmasq.service could not be found.
+ return 1
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Wed Sep 27 14:10:24 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z 3
+ test 3 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed Sep 27 14:10:24 2023 - ERROR - failed to execute the case.
+ exit 3
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Wed Sep 27 14:10:24 2023 - INFO  - start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z '' ]]
+ [[ -z '' ]]
+ LOG_WARN 'no thing to do.'
+ message='no thing to do.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level warn --message 'no thing to do.'
Wed Sep 27 14:10:24 2023 - WARN  - no thing to do.
+ return 0
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Wed Sep 27 14:10:24 2023 - INFO  - Finish environment cleanup!
Wed Sep 27 14:10:24 2023 - INFO  - Finish environment cleanup!
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Wed Sep 27 14:10:24 2023 - INFO  - Finish environment cleanup!
+ systemctl status dnsmasq.service
+ grep 'Active: active'
Unit dnsmasq.service could not be found.
+ CHECK_RESULT 1 0 0 'dnsmasq.service start failed'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='dnsmasq.service start failed'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'dnsmasq.service start failed'
+ LOG_ERROR 'dnsmasq.service start failed'
+ message='dnsmasq.service start failed'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'dnsmasq.service start failed'
Wed Sep 27 14:10:24 2023 - ERROR - dnsmasq.service start failed
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 47'
+ message='../common/common_lib.sh line 47'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 47'
Wed Sep 27 14:10:24 2023 - ERROR - ../common/common_lib.sh line 47
+ '[' 0 -eq 1 ']'
+ return 0
+ test_enabled dnsmasq.service
+ service=dnsmasq.service
++ systemctl is-enabled dnsmasq.service
+ state=not-found
+ '[' not-found == enabled ']'
+ '[' not-found == disabled ']'
+ '[' not-found == masked ']'
+ '[' not-found == static ']'
+ LOG_INFO 'Unit is indirect, ignoring.'
+ message='Unit is indirect, ignoring.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Unit is indirect, ignoring.'
Wed Sep 27 14:10:24 2023 - INFO  - Unit is indirect, ignoring.
+ journalctl --since '2023-09-27 14:10:09' -u dnsmasq.service
+ grep -i 'fail\|error'
+ grep -v -i 'DEBUG\|INFO\|WARNING'
Sep 27 14:10:24 localhost.localdomain systemd[1]: Failed to start dnsmasq.service.
+ CHECK_RESULT 0 0 1 'There is an error message for the log of dnsmasq.service'
+ actual_result=0
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of dnsmasq.service'
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 1 -eq 0 ']'
+ test 0x == 0x
+ test -n 'There is an error message for the log of dnsmasq.service'
+ LOG_ERROR 'There is an error message for the log of dnsmasq.service'
+ message='There is an error message for the log of dnsmasq.service'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'There is an error message for the log of dnsmasq.service'
Wed Sep 27 14:10:24 2023 - ERROR - There is an error message for the log of dnsmasq.service
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 28'
+ message='../common/common_lib.sh line 28'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 28'
Wed Sep 27 14:10:24 2023 - ERROR - ../common/common_lib.sh line 28
+ '[' 0 -eq 1 ']'
+ return 0
+ test_reload dnsmasq.service
+ service=dnsmasq.service
+ systemctl start dnsmasq.service
Failed to start dnsmasq.service: Unit dnsmasq.service not found.
+ grep 'Job type reload is not applicable'
+ systemctl reload dnsmasq.service
+ CHECK_RESULT 1 0 0 'Job type reload is not applicable for unit dnsmasq.service'
+ actual_result=1
+ expect_result=0
+ mode=0
+ error_log='Job type reload is not applicable for unit dnsmasq.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 0 -eq 0 ']'
+ test 1x '!=' 0x
+ test -n 'Job type reload is not applicable for unit dnsmasq.service'
+ LOG_ERROR 'Job type reload is not applicable for unit dnsmasq.service'
+ message='Job type reload is not applicable for unit dnsmasq.service'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'Job type reload is not applicable for unit dnsmasq.service'
Wed Sep 27 14:10:25 2023 - ERROR - Job type reload is not applicable for unit dnsmasq.service
+ (( exec_result++ ))
+ LOG_ERROR '../common/common_lib.sh line 91'
+ message='../common/common_lib.sh line 91'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message '../common/common_lib.sh line 91'
Wed Sep 27 14:10:25 2023 - ERROR - ../common/common_lib.sh line 91
+ '[' 0 -eq 1 ']'
+ return 0
+ systemctl status dnsmasq.service
+ grep 'Active: active'
Unit dnsmasq.service could not be found.
+ systemctl status dnsmasq.service
+ grep 'inactive (dead)'
Unit dnsmasq.service could not be found.
+ return 1
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Wed Sep 27 14:10:25 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z 5
+ test 5 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Wed Sep 27 14:10:25 2023 - ERROR - failed to execute the case.
+ exit 5
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Wed Sep 27 14:10:25 2023 - INFO  - start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z Last metadata expiration check: 0:15:41 ago on Wed 27 Sep 2023 01:54:26 PM UTC.
Dependencies resolved.
================================================================================
 Package           Architecture     Version                  Repository    Size
================================================================================
Installing:
 dnsmasq           x86_64           2.89-1.oe2309            OS           251 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 251 k
Installed size: 583 k
Downloading Packages:
Waiting for process with pid 1393 to finish.
dnsmasq-2.89-1.oe2309.x86_64.rpm                494 kB/s | 251 kB     00:00    
--------------------------------------------------------------------------------
Total                                           193 kB/s | 251 kB     00:01     
Running transaction check
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing 'dnf clean packages'.
Error: Transaction test error:
  package dnsmasq-2.89-1.oe2309.x86_64 is already installed ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile 'Last metadata expiration check: 0:15:41 ago on Wed 27 Sep 2023 01:54:26 PM UTC.
Dependencies resolved.
================================================================================
 Package           Architecture     Version                  Repository    Size
================================================================================
Installing:
 dnsmasq           x86_64           2.89-1.oe2309            OS           251 k

Transaction Summary
================================================================================
Install  1 Package

Total download size: 251 k
Installed size: 583 k
Downloading Packages:
Waiting for process with pid 1393 to finish.
dnsmasq-2.89-1.oe2309.x86_64.rpm                494 kB/s | 251 kB     00:00    
--------------------------------------------------------------------------------
Total                                           193 kB/s | 251 kB     00:01     
Running transaction check
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package dnsmasq-2.89-1.oe2309.x86_64 is already installed'
