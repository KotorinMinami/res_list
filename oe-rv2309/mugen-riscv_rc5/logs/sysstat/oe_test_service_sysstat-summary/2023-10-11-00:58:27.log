+ source ../common/common_lib.sh
++ source /root/mugen/libs/locallibs/common_lib.sh
+++ python3 --version
+++ '[' 0 -eq 0 ']'
+++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ grep expect
+ rpm -qa
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n function ']'
+ pre_test
+ LOG_INFO 'Start environmental preparation.'
+ message='Start environmental preparation.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start environmental preparation.'
Wed Oct 11 00:58:28 2023 - INFO  - Start environmental preparation.
+ DNF_INSTALL sysstat
+ pkgs=sysstat
+ node=1
+ '[' -z '' ']'
+ tmpfile=
++ python3 /root/mugen/libs/locallibs/rpm_manage.py install --pkgs sysstat --node 1 --tempfile ''
+ tmpfile2='Last metadata expiration check: 0:02:07 ago on Wed Oct 11 00:56:40 2023.
Dependencies resolved.
================================================================================
 Package            Architecture    Version                    Repository  Size
================================================================================
Installing:
 sysstat            riscv64         12.7.4-1.oe2309            OS         445 k
Installing dependencies:
 lm_sensors         riscv64         3.6.0-6.oe2309             OS         133 k

Transaction Summary
================================================================================
Install  2 Packages

Total download size: 579 k
Installed size: 2.1 M
Downloading Packages:
Waiting for process with pid 1788 to finish.
[SKIPPED] lm_sensors-3.6.0-6.oe2309.riscv64.rpm: Already downloaded            
[SKIPPED] sysstat-12.7.4-1.oe2309.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1788 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package lm_sensors-3.6.0-6.oe2309.riscv64 is already installed
  package sysstat-12.7.4-1.oe2309.riscv64 is already installed'
+ '[' -z '' ']'
+ tmpfile='Last metadata expiration check: 0:02:07 ago on Wed Oct 11 00:56:40 2023.
Dependencies resolved.
================================================================================
 Package            Architecture    Version                    Repository  Size
================================================================================
Installing:
 sysstat            riscv64         12.7.4-1.oe2309            OS         445 k
Installing dependencies:
 lm_sensors         riscv64         3.6.0-6.oe2309             OS         133 k

Transaction Summary
================================================================================
Install  2 Packages

Total download size: 579 k
Installed size: 2.1 M
Downloading Packages:
Waiting for process with pid 1788 to finish.
[SKIPPED] lm_sensors-3.6.0-6.oe2309.riscv64.rpm: Already downloaded            
[SKIPPED] sysstat-12.7.4-1.oe2309.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1788 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package lm_sensors-3.6.0-6.oe2309.riscv64 is already installed
  package sysstat-12.7.4-1.oe2309.riscv64 is already installed'
+ systemctl start sysstat-summary.service
+ LOG_INFO 'End of environmental preparation!'
+ message='End of environmental preparation!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End of environmental preparation!'
Wed Oct 11 00:59:00 2023 - INFO  - End of environmental preparation!
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start testing...'
+ message='Start testing...'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start testing...'
Wed Oct 11 00:59:00 2023 - INFO  - Start testing...
+ test_oneshot sysstat-summary.service 'inactive (dead)'
+ service=sysstat-summary.service
+ status='inactive (dead)'
+ systemctl status sysstat-summary.service
+ grep Active
+ grep -v 'inactive (dead)'
+ CHECK_RESULT 1 0 1 'There is an error for the status of sysstat-summary.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error for the status of sysstat-summary.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ test_enabled sysstat-summary.service
+ service=sysstat-summary.service
++ systemctl is-enabled sysstat-summary.service
+ state=static
+ '[' static == enabled ']'
+ '[' static == disabled ']'
+ '[' static == masked ']'
+ '[' static == static ']'
+ LOG_INFO 'The unit files have no installation config,This means they are not meant to be enabled using systemctl.'
+ message='The unit files have no installation config,This means they are not meant to be enabled using systemctl.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'The unit files have no installation config,This means they are not meant to be enabled using systemctl.'
Wed Oct 11 00:59:01 2023 - INFO  - The unit files have no installation config,This means they are not meant to be enabled using systemctl.
+ journalctl -u sysstat-summary.service
+ grep -i 'fail\|error'
+ grep -v -i 'DEBUG\|INFO\|WARNING'
+ CHECK_RESULT 1 0 1 'There is an error message for the log of sysstat-summary.service'
+ actual_result=1
+ expect_result=0
+ mode=1
+ error_log='There is an error message for the log of sysstat-summary.service'
+ exit_mode=0
+ '[' -z 1 ']'
+ '[' 1 -eq 0 ']'
+ test 1x == 0x
+ return 0
+ LOG_INFO 'Finish test!'
+ message='Finish test!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish test!'
Wed Oct 11 00:59:01 2023 - INFO  - Finish test!
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Wed Oct 11 00:59:01 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'start environment cleanup.'
+ message='start environment cleanup.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'start environment cleanup.'
Wed Oct 11 00:59:02 2023 - INFO  - start environment cleanup.
+ DNF_REMOVE
+ node=1
+ pkg_list=
+ mode=0
+ [[ -z Last metadata expiration check: 0:02:07 ago on Wed Oct 11 00:56:40 2023.
Dependencies resolved.
================================================================================
 Package            Architecture    Version                    Repository  Size
================================================================================
Installing:
 sysstat            riscv64         12.7.4-1.oe2309            OS         445 k
Installing dependencies:
 lm_sensors         riscv64         3.6.0-6.oe2309             OS         133 k

Transaction Summary
================================================================================
Install  2 Packages

Total download size: 579 k
Installed size: 2.1 M
Downloading Packages:
Waiting for process with pid 1788 to finish.
[SKIPPED] lm_sensors-3.6.0-6.oe2309.riscv64.rpm: Already downloaded            
[SKIPPED] sysstat-12.7.4-1.oe2309.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1788 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing 'dnf clean packages'.
Error: Transaction test error:
  package lm_sensors-3.6.0-6.oe2309.riscv64 is already installed
  package sysstat-12.7.4-1.oe2309.riscv64 is already installed ]]
+ '[' 0 -ne 0 ']'
+ '[' 1 == 0 ']'
+ python3 /root/mugen/libs/locallibs/rpm_manage.py remove --node 1 --pkgs '' --tempfile 'Last metadata expiration check: 0:02:07 ago on Wed Oct 11 00:56:40 2023.
Dependencies resolved.
================================================================================
 Package            Architecture    Version                    Repository  Size
================================================================================
Installing:
 sysstat            riscv64         12.7.4-1.oe2309            OS         445 k
Installing dependencies:
 lm_sensors         riscv64         3.6.0-6.oe2309             OS         133 k

Transaction Summary
================================================================================
Install  2 Packages

Total download size: 579 k
Installed size: 2.1 M
Downloading Packages:
Waiting for process with pid 1788 to finish.
[SKIPPED] lm_sensors-3.6.0-6.oe2309.riscv64.rpm: Already downloaded            
[SKIPPED] sysstat-12.7.4-1.oe2309.riscv64.rpm: Already downloaded              
Running transaction check
Waiting for process with pid 1788 to finish.
Transaction check succeeded.
Running transaction test
The downloaded packages were saved in cache until the next successful transaction.
You can remove cached packages by executing '\''dnf clean packages'\''.
Error: Transaction test error:
  package lm_sensors-3.6.0-6.oe2309.riscv64 is already installed
  package sysstat-12.7.4-1.oe2309.riscv64 is already installed'
Traceback (most recent call last):
  File "/root/mugen/libs/locallibs/rpm_manage.py", line 192, in <module>
    exitcode = rpm_remove(args.node, args.pkgs, args.tempfile)
               ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/root/mugen/libs/locallibs/rpm_manage.py", line 163, in rpm_remove
    with open(tmpfile, "r") as f:
         ^^^^^^^^^^^^^^^^^^
OSError: [Errno 36] File name too long: "Last metadata expiration check: 0:02:07 ago on Wed Oct 11 00:56:40 2023.\nDependencies resolved.\n================================================================================\n Package            Architecture    Version                    Repository  Size\n================================================================================\nInstalling:\n sysstat            riscv64         12.7.4-1.oe2309            OS         445 k\nInstalling dependencies:\n lm_sensors         riscv64         3.6.0-6.oe2309             OS         133 k\n\nTransaction Summary\n================================================================================\nInstall  2 Packages\n\nTotal download size: 579 k\nInstalled size: 2.1 M\nDownloading Packages:\nWaiting for process with pid 1788 to finish.\n[SKIPPED] lm_sensors-3.6.0-6.oe2309.riscv64.rpm: Already downloaded            \n[SKIPPED] sysstat-12.7.4-1.oe2309.riscv64.rpm: Already downloaded              \nRunning transaction check\nWaiting for process with pid 1788 to finish.\nTransaction check succeeded.\nRunning transaction test\nThe downloaded packages were saved in cache until the next successful transaction.\nYou can remove cached packages by executing 'dnf clean packages'.\nError: Transaction test error:\n  package lm_sensors-3.6.0-6.oe2309.riscv64 is already installed\n  package sysstat-12.7.4-1.oe2309.riscv64 is already installed"
+ '[' 0 -ne 0 ']'
+ LOG_INFO 'Finish environment cleanup!'
+ message='Finish environment cleanup!'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Finish environment cleanup!'
Wed Oct 11 00:59:04 2023 - INFO  - Finish environment cleanup!
