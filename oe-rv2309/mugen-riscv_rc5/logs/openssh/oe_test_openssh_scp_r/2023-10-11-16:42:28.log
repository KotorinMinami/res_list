+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n '' ']'
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Wed Oct 11 16:42:30 2023 - INFO  - Start to run test.
+ mkdir -p /tmp/dir
+ echo openEuler
+ expect
spawn scp -r /tmp/ root@127.0.0.1:/tmp/

Authorized users only. All activities may be monitored and reported.
root@127.0.0.1's password: 
scp: Maximum directory depth exceeded: 64 levels
test_file                                       0%    0     0.0KB/s   --:-- ETAtest_file                                     100%   10     4.4KB/s   00:00    
openEuler-latest                                0%    0     0.0KB/s   --:-- ETAopenEuler-latest                              100%  181    84.8KB/s   00:00    
tmp0wiz2nw7                                     0%    0     0.0KB/s   --:-- ETAtmp0wiz2nw7                                   100%   11     4.1KB/s   00:00    
tmpqrb4_4m3                                     0%    0     0.0KB/s   --:-- ETAtmpqrb4_4m3                                   100%   71    32.9KB/s   00:00    
tmpkt8bsde1                                     0%    0     0.0KB/s   --:-- ETAtmpkt8bsde1                                   100%   19     6.0KB/s   00:00    
tmpu7e5oous                                     0%    0     0.0KB/s   --:-- ETAtmpu7e5oous                                   100%   14     7.5KB/s   00:00    
tmp3wkzyfta                                     0%    0     0.0KB/s   --:-- ETAtmp3wkzyfta                                   100%   20     7.3KB/s   00:00    
tmpbprsc9pp                                     0%    0     0.0KB/s   --:-- ETAtmpbprsc9pp                                   100%   20     9.3KB/s   00:00    
tmpxc8ovgwx                                     0%    0     0.0KB/s   --:-- ETAtmpxc8ovgwx                                   100%   58    27.0KB/s   00:00    
tmpw59x6rez                                     0%    0     0.0KB/s   --:-- ETAtmpw59x6rez                                   100%   58    26.2KB/s   00:00    
tmp6rqre7ac                                     0%    0     0.0KB/s   --:-- ETAtmp6rqre7ac                                   100%   58    33.9KB/s   00:00    
tmput9rp1ri                                     0%    0     0.0KB/s   --:-- ETAtmput9rp1ri                                   100%   58    31.1KB/s   00:00    
tmpwf2hurxq                                     0%    0     0.0KB/s   --:-- ETAtmpwf2hurxq                                   100%   58    31.3KB/s   00:00    
tmpvvp5g930                                     0%    0     0.0KB/s   --:-- ETAtmpvvp5g930                                   100%   82    39.0KB/s   00:00    
tmpypbohwoa                                     0%    0     0.0KB/s   --:-- ETAtmpypbohwoa                                   100%    1     0.5KB/s   00:00    
tmpla13eg3y                                     0%    0     0.0KB/s   --:-- ETAtmpla13eg3y                                   100%    1     0.2KB/s   00:00    
scp: failed to upload directory /tmp to /tmp/
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ SSH_CMD 'grep openEuler /tmp/tmp/dir/test_file' 127.0.0.1 'openEuler12#$' root
+ cmd='grep openEuler /tmp/tmp/dir/test_file'
+ remoteip=127.0.0.1
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'grep openEuler /tmp/tmp/dir/test_file' -i 127.0.0.1 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Oct 11 16:42:42 2023 - WARN  - the remote user uses the default configuration.
Wed Oct 11 16:42:43 2023 - WARN  - the remote password uses the default configuration.
Wed Oct 11 16:42:43 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@127.0.0.1 grep openEuler /tmp/tmp/dir/test_file

Authorized users only. All activities may be monitored and reported.
root@127.0.0.1's password: 
openEuler
+ ret=0
+ test 0 -ne 0
+ return 0
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ expect
spawn scp -r root@127.0.0.1:/tmp/tmp /tmp/dir_pull

Authorized users only. All activities may be monitored and reported.
root@127.0.0.1's password: 
tmpla13eg3y                                     0%    0     0.0KB/s   --:-- ETAtmpla13eg3y                                   100%    1     0.2KB/s   00:00    
tmpypbohwoa                                     0%    0     0.0KB/s   --:-- ETAtmpypbohwoa                                   100%    1     0.3KB/s   00:00    
tmpvvp5g930                                     0%    0     0.0KB/s   --:-- ETAtmpvvp5g930                                   100%   82    18.9KB/s   00:00    
tmpwf2hurxq                                     0%    0     0.0KB/s   --:-- ETAtmpwf2hurxq                                   100%   58    14.5KB/s   00:00    
tmput9rp1ri                                     0%    0     0.0KB/s   --:-- ETAtmput9rp1ri                                   100%   58    12.6KB/s   00:00    
tmp6rqre7ac                                     0%    0     0.0KB/s   --:-- ETAtmp6rqre7ac                                   100%   58    16.4KB/s   00:00    
tmpw59x6rez                                     0%    0     0.0KB/s   --:-- ETAtmpw59x6rez                                   100%   58    17.4KB/s   00:00    
tmpxc8ovgwx                                     0%    0     0.0KB/s   --:-- ETAtmpxc8ovgwx                                   100%   58    16.7KB/s   00:00    
tmpbprsc9pp                                     0%    0     0.0KB/s   --:-- ETAtmpbprsc9pp                                   100%   20     4.4KB/s   00:00    
tmp3wkzyfta                                     0%    0     0.0KB/s   --:-- ETAtmp3wkzyfta                                   100%   20     5.9KB/s   00:00    
tmpu7e5oous                                     0%    0     0.0KB/s   --:-- ETAtmpu7e5oous                                   100%   14     4.2KB/s   00:00    
tmpkt8bsde1                                     0%    0     0.0KB/s   --:-- ETAtmpkt8bsde1                                   100%   19     4.1KB/s   00:00    
tmpqrb4_4m3                                     0%    0     0.0KB/s   --:-- ETAtmpqrb4_4m3                                   100%   71    19.7KB/s   00:00    
tmp0wiz2nw7                                     0%    0     0.0KB/s   --:-- ETAtmp0wiz2nw7                                   100%   11     3.1KB/s   00:00    
openEuler-latest                                0%    0     0.0KB/s   --:-- ETAopenEuler-latest                              100%  181    53.1KB/s   00:00    
test_file                                       0%    0     0.0KB/s   --:-- ETAtest_file                                     100%   10     3.0KB/s   00:00    
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ grep openEuler /tmp/dir_pull/dir/test_file
openEuler
+ CHECK_RESULT 0
+ actual_result=0
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 0 ']'
+ '[' 0 -eq 0 ']'
+ test 0x '!=' 0x
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Wed Oct 11 16:42:57 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z ''
+ test 0 -eq 0
+ LOG_INFO 'succeed to execute the case.'
+ message='succeed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'succeed to execute the case.'
Wed Oct 11 16:42:57 2023 - INFO  - succeed to execute the case.
+ exec_result=
+ exit 0
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Wed Oct 11 16:42:58 2023 - INFO  - Start to restore the test environment.
+ rm -rf /tmp/dir /tmp/dir_pull
+ SSH_CMD 'rm -rf /tmp/tmp' 127.0.0.1 'openEuler12#$' root
+ cmd='rm -rf /tmp/tmp'
+ remoteip=127.0.0.1
+ remotepasswd='openEuler12#$'
+ remoteuser=root
+ timeout=300
+ connport=22
+ bash /root/mugen/libs/locallibs/sshcmd.sh -c 'rm -rf /tmp/tmp' -i 127.0.0.1 -u root -p 'openEuler12#$' -t 300 -o 22
Wed Oct 11 16:42:58 2023 - WARN  - the remote user uses the default configuration.
Wed Oct 11 16:42:59 2023 - WARN  - the remote password uses the default configuration.
Wed Oct 11 16:42:59 2023 - WARN  - the connect port using the default configuration
spawn ssh -o ConnectTimeout=300 -p 22 root@127.0.0.1 rm -rf /tmp/tmp

Authorized users only. All activities may be monitored and reported.
root@127.0.0.1's password: 
+ ret=0
+ test 0 -ne 0
+ return 0
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Wed Oct 11 16:43:01 2023 - INFO  - End to restore the test environment.
