+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n '' ']'
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Tue Aug  8 00:47:52 2023 - INFO  - Start to run test.
+ facility_list=("auth" "daemon" "security" "lpr" "mail" "syslog" "news" "user" "uucp" "local1")
+ for facility in "${facility_list[@]}"
+ echo 'auth.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:47:52 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=72933
+ logger -t auth -p auth.info testauth72933
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testauth72933 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:47:57 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'daemon.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:47:57 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=77916
+ logger -t daemon -p daemon.info testdaemon77916
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testdaemon77916 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:02 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'security.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:03 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=83095
+ logger -t security -p security.info testsecurity83095
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testsecurity83095 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:07 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'lpr.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:07 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=88020
+ logger -t lpr -p lpr.info testlpr88020
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testlpr88020 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:12 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'mail.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:12 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=92926
+ logger -t mail -p mail.info testmail92926
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testmail92926 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:17 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'syslog.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:17 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=97861
+ logger -t syslog -p syslog.info testsyslog97861
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testsyslog97861 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:22 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'news.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:22 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=02796
+ logger -t news -p news.info testnews02796
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testnews02796 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:27 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'user.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:27 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=07755
+ logger -t user -p user.info testuser07755
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testuser07755 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:32 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'uucp.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:32 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=12774
+ logger -t uucp -p uucp.info testuucp12774
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testuucp12774 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:37 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'local1.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Tue Aug  8 00:48:37 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=17692
+ logger -t local1 -p local1.info testlocal117692
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testlocal117692 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Tue Aug  8 00:48:41 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Tue Aug  8 00:48:42 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z 20
+ test 20 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Tue Aug  8 00:48:42 2023 - ERROR - failed to execute the case.
+ exit 20
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Tue Aug  8 00:48:43 2023 - INFO  - Start to restore the test environment.
+ rm -rf /var/log/test /etc/rsyslog.d/test.conf
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Tue Aug  8 00:48:44 2023 - INFO  - End to restore the test environment.
