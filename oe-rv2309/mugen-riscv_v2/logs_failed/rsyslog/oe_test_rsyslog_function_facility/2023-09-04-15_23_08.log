+ source /root/mugen/libs/locallibs/common_lib.sh
++ python3 --version
++ '[' 0 -eq 0 ']'
++ source /root/mugen/libs/locallibs/common_lib_python.sh
+ main
++ type -t post_test
+ '[' -n function ']'
+ trap post_test EXIT INT HUP TERM
+ rpm -qa
+ grep expect
++ type -t config_params
+ '[' -n '' ']'
++ type -t pre_test
+ '[' -n '' ']'
++ type -t run_test
+ '[' -n function ']'
+ run_test
+ LOG_INFO 'Start to run test.'
+ message='Start to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to run test.'
Mon Sep  4 15:23:11 2023 - INFO  - Start to run test.
+ facility_list=("auth" "daemon" "security" "lpr" "mail" "syslog" "news" "user" "uucp" "local1")
+ for facility in "${facility_list[@]}"
+ echo 'auth.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:13 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=93194
+ logger -t auth -p auth.info testauth93194
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testauth93194 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:18 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'daemon.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:19 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=99617
+ logger -t daemon -p daemon.info testdaemon99617
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testdaemon99617 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:24 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'security.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:25 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=05903
+ logger -t security -p security.info testsecurity05903
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testsecurity05903 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:30 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'lpr.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:31 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=12124
+ logger -t lpr -p lpr.info testlpr12124
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testlpr12124 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:37 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'mail.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:38 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=18576
+ logger -t mail -p mail.info testmail18576
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testmail18576 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:43 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'syslog.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:44 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=24967
+ logger -t syslog -p syslog.info testsyslog24967
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testsyslog24967 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:50 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'news.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:51 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=31305
+ logger -t news -p news.info testnews31305
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testnews31305 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:23:56 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'user.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:23:57 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=37645
+ logger -t user -p user.info testuser37645
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testuser37645 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:24:02 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'uucp.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:24:03 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=44099
+ logger -t uucp -p uucp.info testuucp44099
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testuucp44099 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:24:09 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ for facility in "${facility_list[@]}"
+ echo 'local1.*   /var/log/test'
oe_test_rsyslog_function_facility.sh: line 25: /etc/rsyslog.d/test.conf: No such file or directory
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ CHECK_RESULT 5
+ actual_result=5
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 5 ']'
+ '[' 0 -eq 0 ']'
+ test 5x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 27'
+ message='oe_test_rsyslog_function_facility.sh line 27'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 27'
Mon Sep  4 15:24:10 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 27
+ '[' 0 -eq 1 ']'
+ return 0
++ date +%s%N
++ cut -c 9-13
+ time=50374
+ logger -t local1 -p local1.info testlocal150374
+ SLEEP_WAIT 3
+ wait_time=3
+ cmd=
+ mode=1
+ python3 /root/mugen/libs/locallibs/sleep_wait.py --time 3 --cmd '' --mode 1
+ grep testlocal150374 /var/log/test
grep: /var/log/test: No such file or directory
+ CHECK_RESULT 2
+ actual_result=2
+ expect_result=0
+ mode=0
+ error_log=
+ exit_mode=0
+ '[' -z 2 ']'
+ '[' 0 -eq 0 ']'
+ test 2x '!=' 0x
+ test -n ''
+ (( exec_result++ ))
+ LOG_ERROR 'oe_test_rsyslog_function_facility.sh line 32'
+ message='oe_test_rsyslog_function_facility.sh line 32'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'oe_test_rsyslog_function_facility.sh line 32'
Mon Sep  4 15:24:15 2023 - ERROR - oe_test_rsyslog_function_facility.sh line 32
+ '[' 0 -eq 1 ']'
+ return 0
+ LOG_INFO 'End to run test.'
+ message='End to run test.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to run test.'
Mon Sep  4 15:24:16 2023 - INFO  - End to run test.
+ CASE_RESULT 0
+ case_re=0
+ test -z 20
+ test 20 -gt 0
+ LOG_ERROR 'failed to execute the case.'
+ message='failed to execute the case.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level error --message 'failed to execute the case.'
Mon Sep  4 15:24:17 2023 - ERROR - failed to execute the case.
+ exit 20
+ post_test
+ LOG_INFO 'Start to restore the test environment.'
+ message='Start to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'Start to restore the test environment.'
Mon Sep  4 15:24:18 2023 - INFO  - Start to restore the test environment.
+ rm -rf /var/log/test /etc/rsyslog.d/test.conf
+ systemctl restart rsyslog
Failed to restart rsyslog.service: Unit rsyslog.service not found.
+ LOG_INFO 'End to restore the test environment.'
+ message='End to restore the test environment.'
+ python3 /root/mugen/libs/locallibs/mugen_log.py --level info --message 'End to restore the test environment.'
Mon Sep  4 15:24:19 2023 - INFO  - End to restore the test environment.
